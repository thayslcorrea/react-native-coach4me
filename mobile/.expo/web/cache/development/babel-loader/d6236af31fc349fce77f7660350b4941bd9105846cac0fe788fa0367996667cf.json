{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\zz4ff\\\\Documents\\\\IFSe\\\\Projetos\\\\reactnative\\\\react-native-coach4me\\\\mobile\\\\src\\\\components\\\\CoachItem\\\\index.tsx\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport { RectButton } from 'react-native-gesture-handler';\nimport heartOutlineIcon from \"../../assets/images/icons/heart-outline.png\";\nimport unfavoriteIcon from \"../../assets/images/icons/unfavorite.png\";\nimport whatsappIcon from \"../../assets/images/icons/whatsapp.png\";\nimport api from \"../../services/api\";\nimport styles from \"./styles\";\nvar CoachItem = function CoachItem(_ref) {\n  var coach = _ref.coach,\n    favorited = _ref.favorited;\n  var _useState = useState(favorited),\n    _useState2 = _slicedToArray(_useState, 2),\n    isFavorited = _useState2[0],\n    setIsFavorited = _useState2[1];\n  function handleLinkToWhatsapp() {\n    api.post('connections', {\n      coach_id: coach.id\n    });\n    Linking.openURL(\"whatsapp://send?phone=\" + coach.whatsapp);\n  }\n  function handleToggleFavorite() {\n    var favorites, favoritesArray, favoriteIndex;\n    return _regeneratorRuntime.async(function handleToggleFavorite$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('favorites'));\n          case 2:\n            favorites = _context.sent;\n            favoritesArray = [];\n            if (favorites) {\n              favoritesArray = JSON.parse(favorites);\n            }\n            if (isFavorited) {\n              favoriteIndex = favoritesArray.findIndex(function (coachItem) {\n                return coachItem.id === coach.id;\n              });\n              favoritesArray.splice(favoriteIndex, 1);\n              setIsFavorited(false);\n            } else {\n              favoritesArray.push(coach);\n              setIsFavorited(true);\n            }\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('favorites', JSON.stringify(favoritesArray)));\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n  return React.createElement(View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.profile,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, React.createElement(Image, {\n    style: styles.avatar,\n    source: {\n      uri: coach.avatar\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }), React.createElement(View, {\n    style: styles.profileInfo,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.name,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, coach.name), React.createElement(Text, {\n    style: styles.subject,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, coach.subject))), React.createElement(Text, {\n    style: styles.bio,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, coach.bio), React.createElement(View, {\n    style: styles.footer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.price,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, \"Pre\\xE7o/hora \", '   ', React.createElement(Text, {\n    style: styles.priceValue,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, \"R$ \", coach.cost)), React.createElement(View, {\n    style: styles.buttonsContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, React.createElement(RectButton, {\n    onPress: handleToggleFavorite,\n    style: [styles.favoriteButton, isFavorited ? styles.favorited : {}],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, isFavorited ? React.createElement(Image, {\n    source: unfavoriteIcon,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }) : React.createElement(Image, {\n    source: heartOutlineIcon,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  })), React.createElement(RectButton, {\n    onPress: handleLinkToWhatsapp,\n    style: styles.contactButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, React.createElement(Image, {\n    source: whatsappIcon,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    style: styles.contactButtonText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, \"Entrar em contato\")))));\n};\nexport default CoachItem;","map":{"version":3,"names":["AsyncStorage","React","useState","View","Image","Text","Linking","RectButton","heartOutlineIcon","unfavoriteIcon","whatsappIcon","api","styles","CoachItem","_ref","coach","favorited","_useState","_useState2","_slicedToArray","isFavorited","setIsFavorited","handleLinkToWhatsapp","post","coach_id","id","openURL","whatsapp","handleToggleFavorite","favorites","favoritesArray","favoriteIndex","_regeneratorRuntime","async","handleToggleFavorite$","_context","prev","next","awrap","getItem","sent","JSON","parse","findIndex","coachItem","splice","push","setItem","stringify","stop","Promise","createElement","style","container","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","profile","avatar","source","uri","profileInfo","name","subject","bio","footer","price","priceValue","cost","buttonsContainer","onPress","favoriteButton","contactButton","contactButtonText"],"sources":["C:/Users/zz4ff/Documents/IFSe/Projetos/reactnative/react-native-coach4me/mobile/src/components/CoachItem/index.tsx"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport React, { useState } from 'react';\r\nimport { View, Image, Text, Linking } from 'react-native';\r\nimport { RectButton } from 'react-native-gesture-handler';\r\n\r\nimport heartOutlineIcon from '../../assets/images/icons/heart-outline.png'\r\nimport unfavoriteIcon from '../../assets/images/icons/unfavorite.png'\r\nimport whatsappIcon from '../../assets/images/icons/whatsapp.png'\r\nimport api from '../../services/api';\r\n\r\nimport styles from './styles';\r\n\r\nexport interface Coach {\r\n  id: number;\r\n  avatar: string;\r\n  bio: string;\r\n  cost: number;\r\n  name: string;\r\n  subject: string;\r\n  whatsapp: string;\r\n}\r\n\r\ninterface CoachItemProps {\r\n  coach: Coach;\r\n  favorited: boolean;\r\n}\r\n\r\nconst CoachItem: React.FC<CoachItemProps> = ({ coach, favorited }) => {\r\n  const [isFavorited, setIsFavorited] = useState(favorited);\r\n  \r\n  function handleLinkToWhatsapp() {\r\n    api.post('connections', {\r\n      coach_id: coach.id,\r\n    });\r\n\r\n    Linking.openURL(`whatsapp://send?phone=${coach.whatsapp}`);\r\n  }\r\n\r\n  async function handleToggleFavorite() {\r\n    const favorites = await AsyncStorage.getItem('favorites');\r\n\r\n    let favoritesArray = [];\r\n\r\n    if (favorites) {\r\n      favoritesArray = JSON.parse(favorites);\r\n    }\r\n\r\n    if (isFavorited) {\r\n      const favoriteIndex = favoritesArray.findIndex((coachItem: Coach) => {\r\n        return coachItem.id === coach.id;\r\n      });\r\n\r\n      favoritesArray.splice(favoriteIndex, 1);\r\n\r\n      setIsFavorited(false);\r\n    } else {\r\n      favoritesArray.push(coach);\r\n\r\n      setIsFavorited(true);\r\n    }\r\n\r\n    await AsyncStorage.setItem('favorites', JSON.stringify(favoritesArray));\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.profile}>\r\n        <Image \r\n          style={styles.avatar}\r\n          source={{ uri: coach.avatar }}\r\n        />\r\n\r\n        <View style={styles.profileInfo}>\r\n          <Text style={styles.name}>{coach.name}</Text>\r\n          <Text style={styles.subject}>{coach.subject}</Text>\r\n        </View>\r\n      </View>\r\n\r\n      <Text style={styles.bio}>\r\n        {coach.bio}\r\n      </Text>\r\n\r\n      <View style={styles.footer}>\r\n        <Text style={styles.price}>\r\n          Pre√ßo/hora {'   '}\r\n          <Text style={styles.priceValue}>R$ {coach.cost}</Text>\r\n        </Text>\r\n\r\n        <View style={styles.buttonsContainer}>\r\n          <RectButton \r\n            onPress={handleToggleFavorite}\r\n            style={[\r\n              styles.favoriteButton, \r\n              isFavorited ? styles.favorited : {}\r\n            ]}\r\n          >\r\n            { isFavorited\r\n              ? <Image source={unfavoriteIcon} />\r\n              : <Image source={heartOutlineIcon} />\r\n            }\r\n          </RectButton>\r\n\r\n          <RectButton onPress={handleLinkToWhatsapp} style={styles.contactButton}>\r\n            <Image source={whatsappIcon} />\r\n            <Text style={styles.contactButtonText}>Entrar em contato</Text>\r\n          </RectButton>\r\n        </View>\r\n      </View>\r\n\r\n\r\n    </View>\r\n  );\r\n}\r\n\r\nexport default CoachItem;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}